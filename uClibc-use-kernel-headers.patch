diff -urN uClibc-0.9.26.org/extra/scripts/fix_includes.sh uClibc-0.9.26/extra/scripts/fix_includes.sh
--- uClibc-0.9.26.org/extra/scripts/fix_includes.sh	2004-01-25 15:20:35.130596892 +0100
+++ uClibc-0.9.26/extra/scripts/fix_includes.sh	2004-01-25 15:24:26.860333672 +0100
@@ -59,16 +59,6 @@
     esac;
 done;
 
-if [ ! -f "$KERNEL_SOURCE/Makefile" ]; then
-    echo "";
-    echo "";
-    echo "The file $KERNEL_SOURCE/Makefile is missing!";
-    echo "Perhaps your kernel source is broken?"
-    echo "";
-    echo "";
-    exit 1;
-fi;
-
 if [ ! -d "$KERNEL_SOURCE" ]; then
     echo "";
     echo "";
@@ -78,23 +68,6 @@
     exit 1;
 fi;
 
-# set current VERSION, PATCHLEVEL, SUBLEVEL, EXTERVERSION
-eval `sed -n -e 's/^\([A-Z]*\) = \([0-9]*\)$/\1=\2/p' -e 's/^\([A-Z]*\) = \(-[-a-z0-9]*\)$/\1=\2/p' $KERNEL_SOURCE/Makefile`
-if [ -z "$VERSION" -o -z "$PATCHLEVEL" -o -z "$SUBLEVEL" ]
-then
-    echo "Unable to determine version for kernel headers"
-    echo -e "\tprovided in directory $KERNEL_SOURCE"
-    exit 1
-fi
-
-echo "Current kernel version is $VERSION.$PATCHLEVEL.$SUBLEVEL${EXTRAVERSION}"
-
-
-echo -e "\n"
-echo "Using kernel headers from $VERSION.$PATCHLEVEL.$SUBLEVEL${EXTRAVERSION} for architecture '$TARGET_ARCH'"
-echo -e "\tprovided in directory $KERNEL_SOURCE"
-echo -e "\n"
-
 # Create a symlink to include/asm
 
 rm -f include/asm*
@@ -111,43 +84,17 @@
     echo "";
     sleep 1;
 
-    if [ "$TARGET_ARCH" = "powerpc" ];then
-	set -x;
-	ln -fs $KERNEL_SOURCE/include/asm-ppc include/asm;
-	set +x;
-    elif [ "$TARGET_ARCH" = "mips" ];then
-	set -x;
-	ln -fs $KERNEL_SOURCE/include/asm-mips include/asm;
-	set +x;
-    elif [ "$TARGET_ARCH" = "arm" ];then
-	set -x;
-	ln -fs $KERNEL_SOURCE/include/asm-arm include/asm;
-	set +x;
-	if [ ! -L $KERNEL_SOURCE/include/asm-arm/proc ] ; then
+    set -x;
+    ln -fs $KERNEL_SOURCE/include/asm include/asm;
+    unset -x;
+    if [ "$TARGET_ARCH" = "arm" ];then
+	if [ ! -L $KERNEL_SOURCE/include/asm/proc ] ; then
 	    if [ ! -L proc ] ; then
 		(cd include/asm;
 		ln -fs proc-armv proc;
 		ln -fs arch-ebsa285 arch);
 	    fi
 	fi;
-    elif [ "$TARGET_ARCH" = "cris" ]; then
-	set -x;
-	ln -fs $KERNEL_SOURCE/include/asm-cris include/asm;
-	set +x;
-    elif [ "$HAS_MMU" != "y" ]; then
-	    if [ -d $KERNEL_SOURCE/include/asm-${TARGET_ARCH}nommu ] ; then
-		set -x;
-		ln -fs $KERNEL_SOURCE/include/asm-${TARGET_ARCH}nommu include/asm;
-		set +x;
-	    else
-		set -x;
-		ln -fs $KERNEL_SOURCE/include/asm-$TARGET_ARCH include/asm;
-		set +x;
-	    fi;
-    else
-	set -x;
-	ln -fs $KERNEL_SOURCE/include/asm-$TARGET_ARCH include/asm;
-	set +x;
     fi;
 else
 # No guessing required.....
@@ -155,12 +102,6 @@
 fi;
 
 
-# Annoyingly, 2.6.x kernel headers also need an include/asm-generic/ directory
-if [ $VERSION -eq 2 ] && [ $PATCHLEVEL -ge 6 ] ; then
-    ln -fs $KERNEL_SOURCE/include/asm-generic include/asm-generic
-fi;
-
-
 # Create the include/linux and include/scsi symlinks.
 rm -f include/linux
 ln -fs $KERNEL_SOURCE/include/linux include/linux
